@layer ui-frame-fix {
    //
    @property --data-taskbar-shift
    {
        inherits: true;
        syntax: "<length-percentage>";
        initial-value: 0px;
    }

    ui-frame[data-dragging] {
        & { will-change: transform, inset !important; };

        /*:where(*) {
            will-change: transform, inset !important;
            animation: none !important;
            animation-duration: 0ms !important;
            transition: none !important;
            transition-duration: 0ms !important;
            box-shadow: none !important;
        }

        :where(svg, input, .u2-input, span, ui-icon) {
            content-visibility: hidden !important;
        }

        :where(ui-icon) {
            visibility: hidden !important;
        }*/
    }

    // if has identified, do top level
    ui-frame:has(:target),
    ui-frame:target
    {
        & {
            --z-index: 0;
            z-index: calc(1099 + var(--z-index, 0));
            display: inline grid;
        }

        // revert visibility if hidden (may not help)
        ::slotted(.ui-content[data-hidden]) {
            display: revert-layer;
        }
    }

    //
    ui-frame:where([data-hidden], :empty, :has(.ui-content[data-hidden]), :has(.ui-content:empty), :not(:has(.ui-content)))
        { display: none; };

    //
    ui-frame .ui-content {
        inline-size: 100%;
        block-size: 100%;
        overflow: hidden;
    }

    //
    body:not(:has(ui-frame:not([data-hidden]))) ui-navbar
    {
        //
        & {
            --theme-surface-alpha: 0;
            --theme-surface-chroma: 0;
            --highlight-coefficient: 0;
        }

        //
        & {
            box-shadow: none;
            pointer-events: none;
        }

        //
        &, & * { --highlight-coefficient: 0; }
        &::part(ui-title-handle) { pointer-events: none; }
    }

    //
    body:not(:has(ui-frame:not([data-hidden]))):not(:has(ui-taskbar:not([data-hidden]))) ui-navbar
        {&::part(ui-back-button) { display: none; }}

    //
    @media (((hover: hover) or (pointer: fine)) and ((width >= 9in) or (orientation: landscape))) {

        //
        body:has(ui-frame:not([data-hidden])) ui-taskbar
        {
            & { --data-taskbar-shift: 2.5rem; }
            &:hover, &:active { --data-taskbar-shift: 0px; }
            &:not(:hover, :active) { --data-taskbar-shift: 2.5rem; }
        }

        //
        body:not(:has(ui-frame:not([data-hidden]))) ui-taskbar
        {
            & {
                --theme-surface-alpha: 0;
                --theme-surface-chroma: 0;
                --highlight-coefficient: 0;
            }

            //
            & {
                box-shadow: none;
                pointer-events: none;
            }
        }

    }
}
