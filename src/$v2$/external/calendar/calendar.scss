@use "./mixins" as cm;

//
@layer ui-calendar
{

    :where(*) {
        background-color: var(--rv-bg-color);
        color: var(--rv-color);
        --hl-co-state: 0;
    }

    .vc-arrow {
        background-color: var(--rv-bg-color) !important;
        padding: 0.5rem !important;
        border-radius: 0.25rem;
        box-sizing: border-box;
    }

    .vc-arrow:hover, .vc-date__btn:hover, button:hover {
        --hl-co-state: 4;
    }

    .vc-arrow::before
    {
        box-sizing: border-box;
        display: inline flow;
        inline-size: max-content;
        aspect-ratio: 1 / 1;
        block-size: 100%;
        mask-repeat: no-repeat;
        mask-origin: content-box;
        mask-clip: border-box;
        mask-size: contain;
        mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tZG93biI+PHBhdGggZD0ibTYgOSA2IDYgNi02Ii8+PC9zdmc+");
        background-color: var(--rv-color);
    }

    :is([data-vc-date-month="prev"], [data-vc-date-month="next"])
    {
        opacity: 0.6;

        &:hover {
            opacity: 0.8;
        }
    }

    :is([data-vc-week-day-off], [data-vc-date-weekend], [data-vc-date-holiday]) {
        &, .vc-date__btn {
            color: oklch(from var(--rv-color) l calc(max(c, 0.01) * 60) h / 1.0);
        }
    }

    [data-vc-date-selected] {
        button { --hl-co-state: 2; };
    }

    [data-vc-date-today] {
        button { @include cm.inverse(); };
        button {
            --hl-co-state: 1;
            --tm-adapt: color-mix(in oklch, var(--tm-cr, currentColor) calc(100% * var(--tm-chroma, 0)), var(--tm-ac, currentColor));
            --tm-bg-base: color-mix(in oklch, var(--tm-cr, currentColor) calc(100% * var(--tm-chroma, 0)), var(--tm-ac, currentColor));//var(--tm-adapt, currentColor);
            --tm-bg-color: oklch(from var(--tm-bg-base, currentColor) l c h / var(--tm-bg-alpha, 0));
        }

        button {
            color: oklch(from var(--rv-color) l c h / 1.0) !important;
        }

        &:is([data-vc-week-day-off], [data-vc-date-weekend], [data-vc-date-holiday]) {
            button { --tm-chroma: 1; };
        }
    }

};
