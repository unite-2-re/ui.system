@use "./lib/mixins" as cm;

//
@layer ui-calendar
{
    //
    @layer ui-general
    {
        .vc {
            gap: 0.5rem !important;
            min-block-size: 20rem !important;
            min-inline-size: 20rem !important;
            place-content: center;
            place-items: center;
            place-self: center;
        }

        .vc-header {
            gap: 0.5rem !important;
        }

        .vc-wrapper {
            flex-basis: stretch !important;
            flex-grow: 1 !important;
            place-content: center !important;
            place-items: stretch !important;
            place-self: stretch !important;
        }

        .vc-header__content {
            max-inline-size: 100% !important;
            inline-size: 100% !important;
        }

        .vc-dates {
            grid-template-rows: repeat(6, 1fr);
        }

        .vc-header__content, .vc-arrow {
            & {
                display: flex !important;
                padding: 0px !important;
                overflow: hidden !important;
                border-radius: 0.5rem !important;
                min-block-size: 2rem;
            };

            & button, &.button {
                & {
                    flex-basis: stretch;
                    flex-grow: 1;
                    border-radius: 0px !important;
                    background-color: var(--rv-bg-color, currentColor) !important;
                    padding-inline: 1rem !important;
                };
                & { --hl-co-state: 2; };
                &:hover { --hl-co-state: 4; };
            }

            & .vc-year {
                flex-grow: 0;
                flex-basis: max-content;
            }
        }

        :where(*)
        {
            background-color: var(--rv-bg-color, currentColor);
            color: oklch(from var(--rv-color) l min(max(c, 0.01), 0.6) h / 1.0);
            --hl-co-state: 0;
            --tm-bg-alpha: 0;
            --tm-chroma: 0.05;
        }

        //
        button
        {
            --tm-bg-alpha: 0;
            --tm-chroma: 0.05;
            --tm-adapt: color-mix(in oklch, var(--tm-cr, currentColor) calc(100% * var(--tm-chroma, 0)), var(--tm-ac, currentColor));
            --tm-bg-base: color-mix(in oklch, var(--tm-cr, currentColor) calc(100% * var(--tm-chroma, 0)), var(--tm-ac, currentColor));//var(--tm-adapt, currentColor);
            --tm-bg-color: oklch(from var(--tm-bg-base, currentColor) l c h / var(--tm-bg-alpha, 0));
        }
    }

    //
    @layer ui-weekend
    {
        :is([data-vc-week-day-off], [data-vc-date-weekend], [data-vc-date-holiday]) {
            &, .vc-date__btn {
                & { --tm-chroma: 0.9; };
                @include cm.in-contrast("--tm-color", "var(--tm-bg-color, var(--rv-bg-color, currentColor))", 1, 2);
            }
        }
    }

    //
    @layer ui-decor
    {
        .vc-arrow
        {
            & { min-block-size: 2rem;
                min-inline-size: max-content;
                inline-size: max-content;
                aspect-ratio: 1 / 1;
                block-size: 100%;
                box-sizing: border-box;
                border-radius: 0.25rem !important;
                background-color: var(--rv-bg-color, currentColor) !important;
                padding: 1rem;
            };
            & { --hl-co-state: 2; };
            &:hover { --hl-co-state: 4; };
        }

        .vc-arrow::before
        {
            padding: 0.25rem;
            aspect-ratio: 1 / 1;
            inline-size: max-content;
            block-size: 100%;
            box-sizing: border-box;
            display: block;
            mask-repeat: no-repeat;
            mask-origin: content-box;
            mask-clip: content-box;
            mask-size: contain;
            mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tZG93biI+PHBhdGggZD0ibTYgOSA2IDYgNi02Ii8+PC9zdmc+");
            background-color: var(--rv-color, currentColor);
        }
    }

    //
    @layer ui-hover
    {
        :where(.vc-arrow, .vc-date__btn, button)
            { &:hover { --hl-co-state: 4; }};
    }

    //
    @layer ui-other-date
    {
        :is([data-vc-date-month="prev"], [data-vc-date-month="next"])
        {
            & { opacity: 0.6; };
            &:hover { opacity: 0.8; };
        }
    }

    //
    @layer ui-specific
    {   //
        [data-vc-date-selected] {
            button {
                & { --hl-co-state: 4; };
                & { --tm-bg-alpha: 0.3; };
            };
        }

        //
        [data-vc-date-today] {
            button {
                @include cm.inverse();
                & {--tm-bg-alpha: 1;};
            }
        }
    }

};
